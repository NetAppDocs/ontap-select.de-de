---
sidebar: sidebar 
permalink: task_chk_nvme_configure.html 
keywords: ontap select, nvme storage, host preparation 
summary: Wenn Sie Vorhaben, NVMe-Laufwerke mit Software-RAID zu verwenden, müssen Sie den Host so konfigurieren, dass die Laufwerke erkannt werden. 
---
= Konfigurieren Sie einen ONTAP Select-Host für die Verwendung von NVMe-Laufwerken
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Wenn Sie NVMe-Laufwerke mit Software-RAID verwenden möchten, müssen Sie den ESXi- oder KVM-Host so konfigurieren, dass die Laufwerke erkannt werden.

Verwenden Sie den VMDirectPath I/O-Pass-Through auf den NVMe Geräten und maximieren Sie die Dateneffizienz. Diese Einstellung stellt die Laufwerke der virtuellen ONTAP Select-Maschine zur Verfügung, sodass ONTAP direkten PCI-Zugriff auf das Gerät hat.



== Schritt 1: Host konfigurieren

Konfigurieren Sie den ESXi- oder KVM-Host so, dass er die Laufwerke erkennt.

.Bevor Sie beginnen
Stellen Sie sicher, dass Ihre Implementierungsumgebung die folgenden Mindestanforderungen erfüllt:

* Für einen ESX-Host, ONTAP Select 9.7 oder höher mit einem unterstützten Deploy-Verwaltungsprogramm
* Für einen KVM-Host ist ONTAP Select 9.17.1 oder höher mit einem unterstützten Deploy-Verwaltungsprogramm erforderlich.
* Lizenzangebot für Premium-XL-Plattformen oder eine 90-Tage-Evaluierungslizenz
* Auf dem ESXi- oder KVM-Host wird eine unterstützte Hypervisor-Version ausgeführt:
+
[role="tabbed-block"]
====
.ESXi
--
ESXi wird auf den folgenden Hypervisor-Versionen unterstützt:

** VMware ESXi 9.0
** VMware ESXi 8.0 U3
** VMware ESXi 8.0 U2
** VMware ESXi 8.0 U1 (Build 21495797)
** VMware ESXi 8.0 GA (Build 20513097)


--
.KVM
--
KVM wird auf den folgenden Hypervisor-Versionen unterstützt:

** Red Hat Enterprise Linux (RHEL) 10.1, 10.0, 9.7, 9.6, 9.5, 9.4, 9.2, 9.1, 9.0, 8.8, 8.7, und 8.6
** Rocky Linux 10.1, 10.0, 9.7, 9.6, 9.5, 9.4, 9.3, 9.2, 9.1, 9.0, 8.9, 8.8, 8.7 und 8.6


--
====
* NVMe Geräte gemäß Spezifikation 1.0 oder höher


Folgen Sie den link:kvm-host-configuration-and-preparation-checklist["Checkliste zur Hostvorbereitung"] und überprüfen Sie die erforderlichen Informationen für die link:reference_chk_deploy_req_info.html["Installation des Bereitstellungsdienstprogramms"] und die link:reference_chk_select_req_info.html["ONTAP Select Installation"] für weitere Informationen.

.Über diese Aufgabe
Sie müssen dieses Verfahren ausführen, bevor Sie einen neuen ONTAP Select Cluster erstellen. Sie können das Verfahren auch ausführen, um zusätzliche NVMe-Laufwerke für einen vorhandenen Software-RAID-NVMe-Cluster zu konfigurieren. In diesem Fall müssen Sie die Laufwerke nach der Konfiguration über Deploy wie zusätzliche SSD-Laufwerke hinzufügen. Der Hauptunterschied besteht darin, dass Deploy die NVMe-Laufwerke erkennt und die Knoten neu startet. Beachten Sie beim Hinzufügen von NVMe-Laufwerken zu einem vorhandenen Cluster Folgendes zum Neustartvorgang:

* Die Implementierung übernimmt die Orchestrierung bei Neustarts.
* DIE HA-Übernahme und -Rückgabe wird ordnungsgemäß durchgeführt, jedoch kann es zeitaufwendig sein, die Aggregate neu zu synchronisieren.
* Es kommt zu Ausfallzeiten in einem Single-Node-Cluster.


Siehe link:concept_stor_capacity_inc.html["Erhöhung der Storage-Kapazität"] Finden Sie weitere Informationen.

.Schritte
. Rufen Sie das Menü * BIOS-Konfiguration* auf dem Host auf, um die Unterstützung für I/O-Virtualisierung zu ermöglichen.
. Aktivieren Sie die Einstellung *Intel VT für Directed I/O (VT-d)*.
+
image:nvme_01.png["Socket-Konfiguration"]

. Einige Server unterstützen *Intel Volume Management Device (Intel VMD)*. Wenn diese Option aktiviert ist, sind die verfügbaren NVMe-Geräte für den ESXi- oder KVM-Hypervisor unsichtbar. Deaktivieren Sie diese Option, bevor Sie fortfahren.
+
image:nvme_07.png["Socket-Konfiguration, VMD"]

. Konfigurieren Sie die NVMe-Laufwerke für Pass-Through-Virtual Machines.
+
.. Öffnen Sie in vSphere die Host-Ansicht *Konfigurieren* und wählen Sie unter *Hardware: PCI-Geräte* *Bearbeiten* aus.
.. Wählen Sie die NVMe-Laufwerke aus, die Sie für ONTAP Select verwenden möchten.
+
Die folgende Beispielausgabe zeigt die verfügbaren Laufwerke für einen ESXi-Host:

+
image:nvme_02.png["PCI-Geräteverfügbarkeit bearbeiten"]

+

NOTE: Sie benötigen einen VMFS-Datastore, der auch durch ein NVMe-Gerät unterstützt wird, um die ONTAP Select VM-Systemfestplatten und virtuellen NVRAM zu hosten. Lassen Sie zu diesem Zweck mindestens ein NVMe-Laufwerk zur Verfügung, wenn Sie die anderen für PCI-Passthrough konfigurieren.

.. Wählen Sie *OK*. Die ausgewählten Geräte zeigen *Verfügbar (ausstehend)* an.


. Wählen Sie *Diesen Host neu starten*.
+
Die folgende Beispielausgabe gilt für einen ESXi-Host:

+
image:nvme_03.png["Starten Sie Diesen Host Neu"]





== Schritt 2: Installieren Sie das ONTAP Select Deploy-Dienstprogramm.

Nachdem die Hosts vorbereitet sind, können Sie das Dienstprogramm ONTAP Select Deploy installieren. Deploy führt Sie durch die Erstellung von ONTAP Select Storage-Clustern auf Ihren neu vorbereiteten Hosts. Dabei erkennt Deploy die für Pass-Through konfigurierten NVMe-Laufwerke und wählt sie automatisch als ONTAP Datenträger aus. Sie können die Standardauswahl bei Bedarf anpassen.


NOTE: Jeder ONTAP Select-Node unterstützt maximal 14 NVMe-Geräte.

Die folgende Beispielausgabe gilt für einen ESXi-Host:

image:nvme_04.png["ONTAP Select Deploy-Cluster"]

Nach der erfolgreichen Bereitstellung des Clusters ermöglicht Ihnen ONTAP System Manager die Bereitstellung des Speichers gemäß Best Practices. ONTAP aktiviert automatisch flashoptimierte Speichereffizienzfunktionen, die Ihren NVMe-Speicher optimal nutzen.

image:nvme_05.png["Lokaler Speicher wird vorbereitet"]

image:nvme_06.png["ONTAP System Manager"]
